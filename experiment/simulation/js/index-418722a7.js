import*as z from"https://cdn.jsdelivr.net/npm/d3@7/+esm";import{Path as Bn}from"https://cdn.jsdelivr.net/npm/d3@7/+esm";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();var Xn={value:()=>{}};function ln(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new st(e)}function st(t){this._=t}function Fn(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}st.prototype=ln.prototype={constructor:st,on:function(t,n){var e=this._,r=Fn(t+"",e),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=Vn(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<s;)if(i=(t=r[o]).type)e[i]=Xt(e[i],t.name,n);else if(n==null)for(i in e)e[i]=Xt(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new st(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,o;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};function Vn(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function Xt(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=Xn,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var vt="http://www.w3.org/1999/xhtml";const Ft={svg:"http://www.w3.org/2000/svg",xhtml:vt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gt(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),Ft.hasOwnProperty(n)?{space:Ft[n],local:t}:t}function qn(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===vt&&n.documentElement.namespaceURI===vt?n.createElement(t):n.createElementNS(e,t)}}function Yn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function un(t){var n=gt(t);return(n.local?Yn:qn)(n)}function Un(){}function At(t){return t==null?Un:function(){return this.querySelector(t)}}function Wn(t){typeof t!="function"&&(t=At(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],s=o.length,c=r[i]=new Array(s),a,l,u=0;u<s;++u)(a=o[u])&&(l=t.call(a,a.__data__,u,o))&&("__data__"in a&&(l.__data__=a.__data__),c[u]=l);return new _(r,this._parents)}function zn(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Kn(){return[]}function fn(t){return t==null?Kn:function(){return this.querySelectorAll(t)}}function Jn(t){return function(){return zn(t.apply(this,arguments))}}function Qn(t){typeof t=="function"?t=Jn(t):t=fn(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var s=n[o],c=s.length,a,l=0;l<c;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new _(r,i)}function hn(t){return function(){return this.matches(t)}}function pn(t){return function(n){return n.matches(t)}}var Zn=Array.prototype.find;function jn(t){return function(){return Zn.call(this.children,t)}}function te(){return this.firstElementChild}function ne(t){return this.select(t==null?te:jn(typeof t=="function"?t:pn(t)))}var ee=Array.prototype.filter;function re(){return Array.from(this.children)}function ie(t){return function(){return ee.call(this.children,t)}}function oe(t){return this.selectAll(t==null?re:ie(typeof t=="function"?t:pn(t)))}function se(t){typeof t!="function"&&(t=hn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],s=o.length,c=r[i]=[],a,l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&c.push(a);return new _(r,this._parents)}function dn(t){return new Array(t.length)}function ce(){return new _(this._enter||this._groups.map(dn),this._parents)}function lt(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}lt.prototype={constructor:lt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ae(t){return function(){return t}}function le(t,n,e,r,i,o){for(var s=0,c,a=n.length,l=o.length;s<l;++s)(c=n[s])?(c.__data__=o[s],r[s]=c):e[s]=new lt(t,o[s]);for(;s<a;++s)(c=n[s])&&(i[s]=c)}function ue(t,n,e,r,i,o,s){var c,a,l=new Map,u=n.length,f=o.length,h=new Array(u),p;for(c=0;c<u;++c)(a=n[c])&&(h[c]=p=s.call(a,a.__data__,c,n)+"",l.has(p)?i[c]=a:l.set(p,a));for(c=0;c<f;++c)p=s.call(t,o[c],c,o)+"",(a=l.get(p))?(r[c]=a,a.__data__=o[c],l.delete(p)):e[c]=new lt(t,o[c]);for(c=0;c<u;++c)(a=n[c])&&l.get(h[c])===a&&(i[c]=a)}function fe(t){return t.__data__}function he(t,n){if(!arguments.length)return Array.from(this,fe);var e=n?ue:le,r=this._parents,i=this._groups;typeof t!="function"&&(t=ae(t));for(var o=i.length,s=new Array(o),c=new Array(o),a=new Array(o),l=0;l<o;++l){var u=r[l],f=i[l],h=f.length,p=pe(t.call(u,u&&u.__data__,l,r)),d=p.length,g=c[l]=new Array(d),S=s[l]=new Array(d),Gn=a[l]=new Array(h);e(u,f,g,S,Gn,p,n);for(var F=0,nt=0,Gt,Bt;F<d;++F)if(Gt=g[F]){for(F>=nt&&(nt=F+1);!(Bt=S[nt])&&++nt<d;);Gt._next=Bt||null}}return s=new _(s,r),s._enter=c,s._exit=a,s}function pe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function de(){return new _(this._exit||this._groups.map(dn),this._parents)}function ge(t,n,e){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),n!=null&&(i=n(i),i&&(i=i.selection())),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function me(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,s=Math.min(i,o),c=new Array(i),a=0;a<s;++a)for(var l=e[a],u=r[a],f=l.length,h=c[a]=new Array(f),p,d=0;d<f;++d)(p=l[d]||u[d])&&(h[d]=p);for(;a<i;++a)c[a]=e[a];return new _(c,this._parents)}function ye(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function _e(t){t||(t=xe);function n(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var s=e[o],c=s.length,a=i[o]=new Array(c),l,u=0;u<c;++u)(l=s[u])&&(a[u]=l);a.sort(n)}return new _(i,this._parents).order()}function xe(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function we(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ve(){return Array.from(this)}function be(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Ee(){let t=0;for(const n of this)++t;return t}function Ne(){return!this.node()}function Ce(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,s=i.length,c;o<s;++o)(c=i[o])&&t.call(c,c.__data__,o,i);return this}function Ie(t){return function(){this.removeAttribute(t)}}function $e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Te(t,n){return function(){this.setAttribute(t,n)}}function ke(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Ae(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function Pe(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Se(t,n){var e=gt(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?$e:Ie:typeof n=="function"?e.local?Pe:Ae:e.local?ke:Te)(e,n))}function gn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Me(t){return function(){this.style.removeProperty(t)}}function Re(t,n,e){return function(){this.style.setProperty(t,n,e)}}function De(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function Oe(t,n,e){return arguments.length>1?this.each((n==null?Me:typeof n=="function"?De:Re)(t,n,e??"")):G(this.node(),t)}function G(t,n){return t.style.getPropertyValue(n)||gn(t).getComputedStyle(t,null).getPropertyValue(n)}function Le(t){return function(){delete this[t]}}function He(t,n){return function(){this[t]=n}}function Ge(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function Be(t,n){return arguments.length>1?this.each((n==null?Le:typeof n=="function"?Ge:He)(t,n)):this.node()[t]}function mn(t){return t.trim().split(/^|\s+/)}function Pt(t){return t.classList||new yn(t)}function yn(t){this._node=t,this._names=mn(t.getAttribute("class")||"")}yn.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function _n(t,n){for(var e=Pt(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function xn(t,n){for(var e=Pt(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function Xe(t){return function(){_n(this,t)}}function Fe(t){return function(){xn(this,t)}}function Ve(t,n){return function(){(n.apply(this,arguments)?_n:xn)(this,t)}}function qe(t,n){var e=mn(t+"");if(arguments.length<2){for(var r=Pt(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?Ve:n?Xe:Fe)(e,n))}function Ye(){this.textContent=""}function Ue(t){return function(){this.textContent=t}}function We(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function ze(t){return arguments.length?this.each(t==null?Ye:(typeof t=="function"?We:Ue)(t)):this.node().textContent}function Ke(){this.innerHTML=""}function Je(t){return function(){this.innerHTML=t}}function Qe(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function Ze(t){return arguments.length?this.each(t==null?Ke:(typeof t=="function"?Qe:Je)(t)):this.node().innerHTML}function je(){this.nextSibling&&this.parentNode.appendChild(this)}function tr(){return this.each(je)}function nr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function er(){return this.each(nr)}function rr(t){var n=typeof t=="function"?t:un(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function ir(){return null}function or(t,n){var e=typeof t=="function"?t:un(t),r=n==null?ir:typeof n=="function"?n:At(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function sr(){var t=this.parentNode;t&&t.removeChild(this)}function cr(){return this.each(sr)}function ar(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function lr(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function ur(t){return this.select(t?lr:ar)}function fr(t){return arguments.length?this.property("__data__",t):this.node().__data__}function hr(t){return function(n){t.call(this,n,this.__data__)}}function pr(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function dr(t){return function(){var n=this.__on;if(n){for(var e=0,r=-1,i=n.length,o;e<i;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++r]=o;++r?n.length=r:delete this.__on}}}function gr(t,n,e){return function(){var r=this.__on,i,o=hr(n);if(r){for(var s=0,c=r.length;s<c;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),i.value=n;return}}this.addEventListener(t.type,o,e),i={type:t.type,name:t.name,value:n,listener:o,options:e},r?r.push(i):this.__on=[i]}}function mr(t,n,e){var r=pr(t+""),i,o=r.length,s;if(arguments.length<2){var c=this.node().__on;if(c){for(var a=0,l=c.length,u;a<l;++a)for(i=0,u=c[a];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(c=n?gr:dr,i=0;i<o;++i)this.each(c(r[i],n,e));return this}function wn(t,n,e){var r=gn(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function yr(t,n){return function(){return wn(this,t,n)}}function _r(t,n){return function(){return wn(this,t,n.apply(this,arguments))}}function xr(t,n){return this.each((typeof n=="function"?_r:yr)(t,n))}function*wr(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var vn=[null];function _(t,n){this._groups=t,this._parents=n}function j(){return new _([[document.documentElement]],vn)}function vr(){return this}_.prototype=j.prototype={constructor:_,select:Wn,selectAll:Qn,selectChild:ne,selectChildren:oe,filter:se,data:he,enter:ce,exit:de,join:ge,merge:me,selection:vr,order:ye,sort:_e,call:we,nodes:ve,node:be,size:Ee,empty:Ne,each:Ce,attr:Se,style:Oe,property:Be,classed:qe,text:ze,html:Ze,raise:tr,lower:er,append:rr,insert:or,remove:cr,clone:ur,datum:fr,on:mr,dispatch:xr,[Symbol.iterator]:wr};function Vt(t){return typeof t=="string"?new _([[document.querySelector(t)]],[document.documentElement]):new _([[t]],vn)}function St(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function bn(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function tt(){}var K=.7,ut=1/K,H="\\s*([+-]?\\d+)\\s*",J="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",E="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",br=/^#([0-9a-f]{3,8})$/,Er=new RegExp(`^rgb\\(${H},${H},${H}\\)$`),Nr=new RegExp(`^rgb\\(${E},${E},${E}\\)$`),Cr=new RegExp(`^rgba\\(${H},${H},${H},${J}\\)$`),Ir=new RegExp(`^rgba\\(${E},${E},${E},${J}\\)$`),$r=new RegExp(`^hsl\\(${J},${E},${E}\\)$`),Tr=new RegExp(`^hsla\\(${J},${E},${E},${J}\\)$`),qt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};St(tt,Q,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Yt,formatHex:Yt,formatHex8:kr,formatHsl:Ar,formatRgb:Ut,toString:Ut});function Yt(){return this.rgb().formatHex()}function kr(){return this.rgb().formatHex8()}function Ar(){return En(this).formatHsl()}function Ut(){return this.rgb().formatRgb()}function Q(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=br.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?Wt(n):e===3?new m(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?et(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?et(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Er.exec(t))?new m(n[1],n[2],n[3],1):(n=Nr.exec(t))?new m(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Cr.exec(t))?et(n[1],n[2],n[3],n[4]):(n=Ir.exec(t))?et(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=$r.exec(t))?Jt(n[1],n[2]/100,n[3]/100,1):(n=Tr.exec(t))?Jt(n[1],n[2]/100,n[3]/100,n[4]):qt.hasOwnProperty(t)?Wt(qt[t]):t==="transparent"?new m(NaN,NaN,NaN,0):null}function Wt(t){return new m(t>>16&255,t>>8&255,t&255,1)}function et(t,n,e,r){return r<=0&&(t=n=e=NaN),new m(t,n,e,r)}function Pr(t){return t instanceof tt||(t=Q(t)),t?(t=t.rgb(),new m(t.r,t.g,t.b,t.opacity)):new m}function bt(t,n,e,r){return arguments.length===1?Pr(t):new m(t,n,e,r??1)}function m(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}St(m,bt,bn(tt,{brighter(t){return t=t==null?ut:Math.pow(ut,t),new m(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?K:Math.pow(K,t),new m(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new m(D(this.r),D(this.g),D(this.b),ft(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zt,formatHex:zt,formatHex8:Sr,formatRgb:Kt,toString:Kt}));function zt(){return`#${M(this.r)}${M(this.g)}${M(this.b)}`}function Sr(){return`#${M(this.r)}${M(this.g)}${M(this.b)}${M((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kt(){const t=ft(this.opacity);return`${t===1?"rgb(":"rgba("}${D(this.r)}, ${D(this.g)}, ${D(this.b)}${t===1?")":`, ${t})`}`}function ft(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function D(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function M(t){return t=D(t),(t<16?"0":"")+t.toString(16)}function Jt(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new v(t,n,e,r)}function En(t){if(t instanceof v)return new v(t.h,t.s,t.l,t.opacity);if(t instanceof tt||(t=Q(t)),!t)return new v;if(t instanceof v)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),s=NaN,c=o-i,a=(o+i)/2;return c?(n===o?s=(e-r)/c+(e<r)*6:e===o?s=(r-n)/c+2:s=(n-e)/c+4,c/=a<.5?o+i:2-o-i,s*=60):c=a>0&&a<1?0:s,new v(s,c,a,t.opacity)}function Mr(t,n,e,r){return arguments.length===1?En(t):new v(t,n,e,r??1)}function v(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}St(v,Mr,bn(tt,{brighter(t){return t=t==null?ut:Math.pow(ut,t),new v(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?K:Math.pow(K,t),new v(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new m(_t(t>=240?t-240:t+120,i,r),_t(t,i,r),_t(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new v(Qt(this.h),rt(this.s),rt(this.l),ft(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ft(this.opacity);return`${t===1?"hsl(":"hsla("}${Qt(this.h)}, ${rt(this.s)*100}%, ${rt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Qt(t){return t=(t||0)%360,t<0?t+360:t}function rt(t){return Math.max(0,Math.min(1,t||0))}function _t(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}const Nn=t=>()=>t;function Rr(t,n){return function(e){return t+e*n}}function Dr(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function Or(t){return(t=+t)==1?Cn:function(n,e){return e-n?Dr(n,e,t):Nn(isNaN(n)?e:n)}}function Cn(t,n){var e=n-t;return e?Rr(t,e):Nn(isNaN(t)?n:t)}const Zt=function t(n){var e=Or(n);function r(i,o){var s=e((i=bt(i)).r,(o=bt(o)).r),c=e(i.g,o.g),a=e(i.b,o.b),l=Cn(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=c(u),i.b=a(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function k(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var Et=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xt=new RegExp(Et.source,"g");function Lr(t){return function(){return t}}function Hr(t){return function(n){return t(n)+""}}function Gr(t,n){var e=Et.lastIndex=xt.lastIndex=0,r,i,o,s=-1,c=[],a=[];for(t=t+"",n=n+"";(r=Et.exec(t))&&(i=xt.exec(n));)(o=i.index)>e&&(o=n.slice(e,o),c[s]?c[s]+=o:c[++s]=o),(r=r[0])===(i=i[0])?c[s]?c[s]+=i:c[++s]=i:(c[++s]=null,a.push({i:s,x:k(r,i)})),e=xt.lastIndex;return e<n.length&&(o=n.slice(e),c[s]?c[s]+=o:c[++s]=o),c.length<2?a[0]?Hr(a[0].x):Lr(n):(n=a.length,function(l){for(var u=0,f;u<n;++u)c[(f=a[u]).i]=f.x(l);return c.join("")})}var jt=180/Math.PI,Nt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function In(t,n,e,r,i,o){var s,c,a;return(s=Math.sqrt(t*t+n*n))&&(t/=s,n/=s),(a=t*e+n*r)&&(e-=t*a,r-=n*a),(c=Math.sqrt(e*e+r*r))&&(e/=c,r/=c,a/=c),t*r<n*e&&(t=-t,n=-n,a=-a,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*jt,skewX:Math.atan(a)*jt,scaleX:s,scaleY:c}}var it;function Br(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Nt:In(n.a,n.b,n.c,n.d,n.e,n.f)}function Xr(t){return t==null||(it||(it=document.createElementNS("http://www.w3.org/2000/svg","g")),it.setAttribute("transform",t),!(t=it.transform.baseVal.consolidate()))?Nt:(t=t.matrix,In(t.a,t.b,t.c,t.d,t.e,t.f))}function $n(t,n,e,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,h,p,d){if(l!==f||u!==h){var g=p.push("translate(",null,n,null,e);d.push({i:g-4,x:k(l,f)},{i:g-2,x:k(u,h)})}else(f||h)&&p.push("translate("+f+n+h+e)}function s(l,u,f,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:k(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function c(l,u,f,h){l!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:k(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function a(l,u,f,h,p,d){if(l!==f||u!==h){var g=p.push(i(p)+"scale(",null,",",null,")");d.push({i:g-4,x:k(l,f)},{i:g-2,x:k(u,h)})}else(f!==1||h!==1)&&p.push(i(p)+"scale("+f+","+h+")")}return function(l,u){var f=[],h=[];return l=t(l),u=t(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,h),s(l.rotate,u.rotate,f,h),c(l.skewX,u.skewX,f,h),a(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,h),l=u=null,function(p){for(var d=-1,g=h.length,S;++d<g;)f[(S=h[d]).i]=S.x(p);return f.join("")}}}var Fr=$n(Br,"px, ","px)","deg)"),Vr=$n(Xr,", ",")",")"),B=0,q=0,V=0,Tn=1e3,ht,Y,pt=0,O=0,mt=0,Z=typeof performance=="object"&&performance.now?performance:Date,kn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Mt(){return O||(kn(qr),O=Z.now()+mt)}function qr(){O=0}function dt(){this._call=this._time=this._next=null}dt.prototype=An.prototype={constructor:dt,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?Mt():+e)+(n==null?0:+n),!this._next&&Y!==this&&(Y?Y._next=this:ht=this,Y=this),this._call=t,this._time=e,Ct()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ct())}};function An(t,n,e){var r=new dt;return r.restart(t,n,e),r}function Yr(){Mt(),++B;for(var t=ht,n;t;)(n=O-t._time)>=0&&t._call.call(void 0,n),t=t._next;--B}function tn(){O=(pt=Z.now())+mt,B=q=0;try{Yr()}finally{B=0,Wr(),O=0}}function Ur(){var t=Z.now(),n=t-pt;n>Tn&&(mt-=n,pt=t)}function Wr(){for(var t,n=ht,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ht=e);Y=t,Ct(r)}function Ct(t){if(!B){q&&(q=clearTimeout(q));var n=t-O;n>24?(t<1/0&&(q=setTimeout(tn,t-Z.now()-mt)),V&&(V=clearInterval(V))):(V||(pt=Z.now(),V=setInterval(Ur,Tn)),B=1,kn(tn))}}function nn(t,n,e){var r=new dt;return n=n==null?0:+n,r.restart(i=>{r.stop(),t(i+n)},n,e),r}var zr=ln("start","end","cancel","interrupt"),Kr=[],Pn=0,en=1,It=2,ct=3,rn=4,$t=5,at=6;function yt(t,n,e,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(e in s)return;Jr(t,e,{name:n,index:r,group:i,on:zr,tween:Kr,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Pn})}function Rt(t,n){var e=b(t,n);if(e.state>Pn)throw new Error("too late; already scheduled");return e}function N(t,n){var e=b(t,n);if(e.state>ct)throw new Error("too late; already running");return e}function b(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Jr(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=An(o,0,e.time);function o(l){e.state=en,e.timer.restart(s,e.delay,e.time),e.delay<=l&&s(l-e.delay)}function s(l){var u,f,h,p;if(e.state!==en)return a();for(u in r)if(p=r[u],p.name===e.name){if(p.state===ct)return nn(s);p.state===rn?(p.state=at,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[u]):+u<n&&(p.state=at,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[u])}if(nn(function(){e.state===ct&&(e.state=rn,e.timer.restart(c,e.delay,e.time),c(l))}),e.state=It,e.on.call("start",t,t.__data__,e.index,e.group),e.state===It){for(e.state=ct,i=new Array(h=e.tween.length),u=0,f=-1;u<h;++u)(p=e.tween[u].value.call(t,t.__data__,e.index,e.group))&&(i[++f]=p);i.length=f+1}}function c(l){for(var u=l<e.duration?e.ease.call(null,l/e.duration):(e.timer.restart(a),e.state=$t,1),f=-1,h=i.length;++f<h;)i[f].call(t,u);e.state===$t&&(e.on.call("end",t,t.__data__,e.index,e.group),a())}function a(){e.state=at,e.timer.stop(),delete r[n];for(var l in r)return;delete t.__transition}}function Qr(t,n){var e=t.__transition,r,i,o=!0,s;if(e){n=n==null?null:n+"";for(s in e){if((r=e[s]).name!==n){o=!1;continue}i=r.state>It&&r.state<$t,r.state=at,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[s]}o&&delete t.__transition}}function Zr(t){return this.each(function(){Qr(this,t)})}function jr(t,n){var e,r;return function(){var i=N(this,t),o=i.tween;if(o!==e){r=e=o;for(var s=0,c=r.length;s<c;++s)if(r[s].name===n){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function ti(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var o=N(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var c={name:n,value:e},a=0,l=i.length;a<l;++a)if(i[a].name===n){i[a]=c;break}a===l&&i.push(c)}o.tween=i}}function ni(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=b(this.node(),e).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((n==null?jr:ti)(e,t,n))}function Dt(t,n,e){var r=t._id;return t.each(function(){var i=N(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return b(i,r).value[n]}}function Sn(t,n){var e;return(typeof n=="number"?k:n instanceof Q?Zt:(e=Q(n))?(n=e,Zt):Gr)(t,n)}function ei(t){return function(){this.removeAttribute(t)}}function ri(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ii(t,n,e){var r,i=e+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=n(r=s,e)}}function oi(t,n,e){var r,i=e+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=n(r=s,e)}}function si(t,n,e){var r,i,o;return function(){var s,c=e(this),a;return c==null?void this.removeAttribute(t):(s=this.getAttribute(t),a=c+"",s===a?null:s===r&&a===i?o:(i=a,o=n(r=s,c)))}}function ci(t,n,e){var r,i,o;return function(){var s,c=e(this),a;return c==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),a=c+"",s===a?null:s===r&&a===i?o:(i=a,o=n(r=s,c)))}}function ai(t,n){var e=gt(t),r=e==="transform"?Vr:Sn;return this.attrTween(t,typeof n=="function"?(e.local?ci:si)(e,r,Dt(this,"attr."+t,n)):n==null?(e.local?ri:ei)(e):(e.local?oi:ii)(e,r,n))}function li(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function ui(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function fi(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&ui(t,o)),e}return i._value=n,i}function hi(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&li(t,o)),e}return i._value=n,i}function pi(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=gt(t);return this.tween(e,(r.local?fi:hi)(r,n))}function di(t,n){return function(){Rt(this,t).delay=+n.apply(this,arguments)}}function gi(t,n){return n=+n,function(){Rt(this,t).delay=n}}function mi(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?di:gi)(n,t)):b(this.node(),n).delay}function yi(t,n){return function(){N(this,t).duration=+n.apply(this,arguments)}}function _i(t,n){return n=+n,function(){N(this,t).duration=n}}function xi(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?yi:_i)(n,t)):b(this.node(),n).duration}function wi(t,n){if(typeof n!="function")throw new Error;return function(){N(this,t).ease=n}}function vi(t){var n=this._id;return arguments.length?this.each(wi(n,t)):b(this.node(),n).ease}function bi(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;N(this,t).ease=e}}function Ei(t){if(typeof t!="function")throw new Error;return this.each(bi(this._id,t))}function Ni(t){typeof t!="function"&&(t=hn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],s=o.length,c=r[i]=[],a,l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&c.push(a);return new T(r,this._parents,this._name,this._id)}function Ci(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),s=new Array(r),c=0;c<o;++c)for(var a=n[c],l=e[c],u=a.length,f=s[c]=new Array(u),h,p=0;p<u;++p)(h=a[p]||l[p])&&(f[p]=h);for(;c<r;++c)s[c]=n[c];return new T(s,this._parents,this._name,this._id)}function Ii(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function $i(t,n,e){var r,i,o=Ii(n)?Rt:N;return function(){var s=o(this,t),c=s.on;c!==r&&(i=(r=c).copy()).on(n,e),s.on=i}}function Ti(t,n){var e=this._id;return arguments.length<2?b(this.node(),e).on.on(t):this.each($i(e,t,n))}function ki(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function Ai(){return this.on("end.remove",ki(this._id))}function Pi(t){var n=this._name,e=this._id;typeof t!="function"&&(t=At(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var c=r[s],a=c.length,l=o[s]=new Array(a),u,f,h=0;h<a;++h)(u=c[h])&&(f=t.call(u,u.__data__,h,c))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f,yt(l[h],n,e,h,l,b(u,e)));return new T(o,this._parents,n,e)}function Si(t){var n=this._name,e=this._id;typeof t!="function"&&(t=fn(t));for(var r=this._groups,i=r.length,o=[],s=[],c=0;c<i;++c)for(var a=r[c],l=a.length,u,f=0;f<l;++f)if(u=a[f]){for(var h=t.call(u,u.__data__,f,a),p,d=b(u,e),g=0,S=h.length;g<S;++g)(p=h[g])&&yt(p,n,e,g,h,d);o.push(h),s.push(u)}return new T(o,s,n,e)}var Mi=j.prototype.constructor;function Ri(){return new Mi(this._groups,this._parents)}function Di(t,n){var e,r,i;return function(){var o=G(this,t),s=(this.style.removeProperty(t),G(this,t));return o===s?null:o===e&&s===r?i:i=n(e=o,r=s)}}function Mn(t){return function(){this.style.removeProperty(t)}}function Oi(t,n,e){var r,i=e+"",o;return function(){var s=G(this,t);return s===i?null:s===r?o:o=n(r=s,e)}}function Li(t,n,e){var r,i,o;return function(){var s=G(this,t),c=e(this),a=c+"";return c==null&&(a=c=(this.style.removeProperty(t),G(this,t))),s===a?null:s===r&&a===i?o:(i=a,o=n(r=s,c))}}function Hi(t,n){var e,r,i,o="style."+n,s="end."+o,c;return function(){var a=N(this,t),l=a.on,u=a.value[o]==null?c||(c=Mn(n)):void 0;(l!==e||i!==u)&&(r=(e=l).copy()).on(s,i=u),a.on=r}}function Gi(t,n,e){var r=(t+="")=="transform"?Fr:Sn;return n==null?this.styleTween(t,Di(t,r)).on("end.style."+t,Mn(t)):typeof n=="function"?this.styleTween(t,Li(t,r,Dt(this,"style."+t,n))).each(Hi(this._id,t)):this.styleTween(t,Oi(t,r,n),e).on("end.style."+t,null)}function Bi(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function Xi(t,n,e){var r,i;function o(){var s=n.apply(this,arguments);return s!==i&&(r=(i=s)&&Bi(t,s,e)),r}return o._value=n,o}function Fi(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,Xi(t,n,e??""))}function Vi(t){return function(){this.textContent=t}}function qi(t){return function(){var n=t(this);this.textContent=n??""}}function Yi(t){return this.tween("text",typeof t=="function"?qi(Dt(this,"text",t)):Vi(t==null?"":t+""))}function Ui(t){return function(n){this.textContent=t.call(this,n)}}function Wi(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&Ui(i)),n}return r._value=t,r}function zi(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Wi(t))}function Ki(){for(var t=this._name,n=this._id,e=Rn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],c=s.length,a,l=0;l<c;++l)if(a=s[l]){var u=b(a,n);yt(a,t,e,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new T(r,this._parents,t,e)}function Ji(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,s){var c={value:s},a={value:function(){--i===0&&o()}};e.each(function(){var l=N(this,r),u=l.on;u!==t&&(n=(t=u).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(a)),l.on=n}),i===0&&o()})}var Qi=0;function T(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Rn(){return++Qi}var C=j.prototype;T.prototype={constructor:T,select:Pi,selectAll:Si,selectChild:C.selectChild,selectChildren:C.selectChildren,filter:Ni,merge:Ci,selection:Ri,transition:Ki,call:C.call,nodes:C.nodes,node:C.node,size:C.size,empty:C.empty,each:C.each,on:Ti,attr:ai,attrTween:pi,style:Gi,styleTween:Fi,text:Yi,textTween:zi,remove:Ai,tween:ni,delay:mi,duration:xi,ease:vi,easeVarying:Ei,end:Ji,[Symbol.iterator]:C[Symbol.iterator]};function Zi(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ji={time:null,delay:0,duration:250,ease:Zi};function to(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function no(t){var n,e;t instanceof T?(n=t._id,t=t._name):(n=Rn(),(e=ji).time=Mt(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],c=s.length,a,l=0;l<c;++l)(a=s[l])&&yt(a,t,n,l,s,e||to(a,n));return new T(r,this._parents,t,n)}j.prototype.interrupt=Zr;j.prototype.transition=no;function eo(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function ro(t,n){return fetch(t,n).then(eo)}function io(t){return(n,e)=>ro(n,e).then(r=>new DOMParser().parseFromString(r,t))}const oo=io("application/xml");function U(t,n,e){this.k=t,this.x=n,this.y=e}U.prototype={constructor:U,scale:function(t){return t===1?this:new U(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new U(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};U.prototype;class Dn{constructor(n,e,r,i,o,s,c){this.id=n,this.svgContainer=e,this.url=r,this.sensor,this.scale=i,this.offsetX=s,this.offsetY=c,this.movable=o,console.log("Component created: "+this.id),console.log("url: "+this.url),console.log("scale: "+this.scale)}async load(){if(Vt("#"+this.id).node()!=null)return;const n=await oo(this.url);this.sensor=this.svgContainer.append("g").attr("transform","translate("+[this.offsetX,this.offsetY]+") scale("+this.scale+")").attr("id",this.id),this.sensor.node().append(Vt(n.documentElement).node())}}const L=["connector0pin-0","connector1pin-1","connector2pin-3","connector3pin-7","connector4pin-4","connector5pin-1","connector6pin-1","connector7pin-3","connector8pin-0","connector9pin-3","connector10pin-2","connector11pin-1","connector12pin-7","connector13pin-5","connector14pin-6","connector15pin-5","connector16pin-4","connector17pin-2","connector18pin-2","connector19pin-1","connector20pin-7","connector21pin-2","connector22pin-4","connector23pin-1","connector24pin-6","connector25pin-5","connector26pin-7","connector27pin-8","connector28pin-5","connector29pin-9","connector30pin-2","connector31pin-7","connector32pin-3","connector33pin-6","connector34pin-4","connector35pin-7","connector36pin-9","connector37pin-7","connector38pin-2","connector39pin-2","_x30_.1.0.220.2.3-0","_x30_.1.0.221.0.5.13-6","_x30_.1.0.224.0.10_1_-3","_x30_.1.0.223.0.0.1.12-2","_x30_.1.0.224.0.10-7","_x30_.1.0.226.0.1","_x30_.1.0.227.1"],R={"connector0pin-0":"3.3v","connector1pin-1":"GPIO 2","connector2pin-3":"GPIO 3","connector3pin-7":"GPIO 4","connector4pin-4":"GND","connector5pin-1":"GPIO 17","connector6pin-1":"GPIO 27","connector7pin-3":"GPIO 22","connector8pin-0":"3.3v","connector9pin-3":"GPIO 10","connector10pin-2":"GPIO 9","connector11pin-1":"GPIO 11","connector12pin-7":"GND","connector13pin-5":"RESERVED","connector14pin-6":"GPIO 5","connector15pin-5":"GPIO 6","connector16pin-4":"GPIO 13","connector17pin-2":"GPIO 19","connector18pin-2":"GPIO 26","connector19pin-1":"GND","connector20pin-7":"GPIO 21","connector21pin-2":"GPIO 20","connector22pin-4":"GPIO 16","connector23pin-1":"GND","connector24pin-6":"GPIO 12","connector25pin-5":"GND","connector26pin-7":"RESERVED","connector27pin-8":"GPIO 7","connector28pin-5":"GPIO 8","connector29pin-9":"GPIO 25","connector30pin-2":"GND","connector31pin-7":"GPIO 24","connector32pin-3":"GPIO 23","connector33pin-6":"GND","connector34pin-4":"GPIO 18","connector35pin-7":"UART 0 RX","connector36pin-9":"UART 0 TX","connector37pin-7":"GND","connector38pin-2":"5V PWR","connector39pin-2":"5V PWR","_x30_.1.0.220.2.3-0":"HDMI","_x30_.1.0.221.0.5.13-6":"Power","_x30_.1.0.223.0.0.1.12-2":"Ethernet","_x30_.1.0.224.0.10-7":"USB 0","_x30_.1.0.224.0.10_1_-3":"USB 1","_x30_.1.0.226.0.1":"CSI Camera","_x30_.1.0.227.1":"DSI Display"},Ot=["vcc","gnd","out"],W={vcc:"VCC of DHT11 Sensor",gnd:"Ground pin of DHT11 Sensor",out:"Out pin DHT11 Sensor"},so=t=>{if(t.length==0)return{error:"No connection found"};const n=["GPIO","GND","vcc","gnd","out","5V PWR"];let e=0;return t.forEach(r=>{if(n.find(i=>i==r.connector)){e++;return}if(R[r.connector]=="GND"){e++;return}if(R[r.connector].includes("GPIO")){e++;return}}),console.log(e),e==5};class co{constructor(n){this.logLocationId=n,this.connections=[]}addConnection(n){this.connections.push(n),this.logConnectionsToHtml()}undoLastConnection(){if(this.connections.length){const n=this.connections.pop(),e=document.getElementById(this.logLocationId),r=e.lastChild;e.removeChild(r),this.logConnectionsToHtml(),console.log("Removed connection:",n)}else console.warn("No more connections to undo")}logConnectionsToHtml(){if(this.connections.length%2==0){let n=document.createElement("li");const e=R[this.connections[this.connections.length-2].connector]?`${R[this.connections[this.connections.length-2].connector]} pin of Raspberry Pi`:W[this.connections[this.connections.length-2].connector]?W[this.connections[this.connections.length-2].connector]:this.connections[this.connections.length-2].connector,r=R[this.connections[this.connections.length-1].connector]?`${R[this.connections[this.connections.length-1].connector]} pin of Raspberry Pi`:W[this.connections[this.connections.length-1].connector]?W[this.connections[this.connections.length-1].connector]:this.connections[this.connections.length-1].connector;n.innerHTML=`Connection no. ${this.connections.length/2} : ${e} to ${r}`,document.getElementById(this.logLocationId).appendChild(n);return}}getConnectionLog(){return this.connections}}class ao{constructor(n,e,r,i){this.id=n,this.headingId=e,this.textId=r,this.closeButtonId=i,document.getElementById(this.closeButtonId).addEventListener("click",()=>{document.getElementById(this.id).style.display="none"})}throw(n,e){document.getElementById(this.id).style.display="flex",document.getElementById(this.headingId).innerHTML=n,document.getElementById(this.textId).innerHTML=e}}const A=document.getElementById("svg");A||console.error("SVG container not found");const Tt=(A==null?void 0:A.offsetWidth)||window.innerWidth,lo=(A!=null&&A.offsetTop?window.innerHeight-A.offsetTop:window.innerHeight)||400,uo=window.innerWidth<850,on={desktop:{raspberry:{scale:1,x:0,y:0},sensor:{scale:2.5,x:300,y:35}},mobile:{raspberry:{scale:.25,x:Tt*.1,y:10},sensor:{scale:.625,x:Tt*.4,y:100}}},y=uo?on.mobile:on.desktop,fo=Math.max(y.raspberry.x+400*y.raspberry.scale,y.sensor.x+100*y.sensor.scale),ho=Math.max(y.raspberry.y+200*y.raspberry.scale,y.sensor.y+100*y.sensor.scale),po=Math.max(Tt,fo+50),go=Math.max(lo,ho+50),w=z.select("#svg").append("svg").attr("id","svgContainer").attr("viewBox",`0 0 ${po} ${go}`).attr("preserveAspectRatio","xMidYMid meet").style("width","100%").style("height","auto"),sn=(t,n)=>{Lt.append("path").attr("d",t).attr("stroke","black").attr("stroke-width","2px").attr("fill","none").attr("id",n)},cn=(t,n,e)=>{w.append("circle").attr("cx",t).attr("cy",n).attr("r",3).attr("fill","black").attr("id",e)},mo=new Dn("raspberry",w,"images/pi3dirk.svg",y.raspberry.scale,!1,y.raspberry.x,y.raspberry.y),yo=new Dn("sensorDHT11",w,"images/sensor.svg",y.sensor.scale,!1,y.sensor.x,y.sensor.y),Lt=w.append("g").attr("id","pathsGroup"),On=document.getElementById("rasberryPi"),Ln=document.getElementById("sensor"),X=document.getElementById("displayInfo"),ot=document.getElementById("componentDescription"),kt=document.getElementById("undoButton"),$=document.getElementById("temperature");$.disabled=!0;$.style.opacity="0.5";const P=new co("connectionLog"),an=new ao("errorBox","errorHeading","errorText","closeErrorBox");let x,I=0,Ht=!1;kt.addEventListener("click",()=>{P.undoLastConnection(),xo()});const _o=t=>{Lt.selectAll(`path[id="${t}"]`).nodes().forEach(e=>e.remove())},xo=()=>{if(x){Lt.selectAll(`path[id^="path${I}"]`).nodes().forEach(e=>e.remove());const n=w.select(`#marker-start-${I}`);n.empty()||n.remove(),x=null,console.log("Removed all incomplete paths and markers");return}if(P.connections.length>0){const t=P.connections[P.connections.length-1],n=t.lineID,e=parseInt(n.replace("path",""));_o(n);const r=w.select(`#marker-start-${e}`);r.empty()||r.remove();const i=w.select(`#marker-end-${e}`);i.empty()||i.remove(),L.includes(t.connector)&&z.select(`#${t.connector}`).style("fill","#9a916c"),t.connectorEnd&&L.includes(t.connectorEnd)&&z.select(`#${t.connectorEnd}`).style("fill","#9a916c"),P.connections.pop(),console.log(`Removed paths and markers with line ID: ${n}`)}else console.warn("No more connections to undo")};On.addEventListener("click",async()=>{await mo.load()});Ln.addEventListener("click",async()=>{await yo.load()});const wo="Raspberry Pi: A small single-board computer for learning and prototyping. The 5V pin connects to the DHT11 VCC for power, GND pin connects to the DHT11 GND for a common ground, and GPIO4 (Physical Pin 7) connects to the sensor’s Data Out to receive temperature and humidity data.",vo="DHT11 Sensor: A basic temperature and humidity sensor with digital output. The VCC pin connects to the Raspberry Pi’s 5V for power, GND pin connects to the Raspberry Pi’s GND, and Data Out pin connects to GPIO4 (Physical Pin 7) to send data for processing.",Hn=(t,n)=>{t.addEventListener("mouseover",()=>{ot.innerHTML=n,ot.style.display="block"}),t.addEventListener("mouseout",()=>{ot.style.display="none",ot.innerHTML=""})};Hn(On,wo);Hn(Ln,vo);const wt=t=>L.includes(t.srcElement.id)||Ot.includes(t.srcElement.id);w.on("dblclick",t=>{if(wt(t)&&!x){x=new Bn,x.moveTo(t.offsetX,t.offsetY),L.includes(t.srcElement.id)?z.select(`#${t.srcElement.id}`).style("fill","black"):cn(t.offsetX,t.offsetY,`marker-start-${I}`),P.addConnection({lineID:`path${I}`,x:t.offsetX,y:t.offsetY,connector:t.srcElement.id,connectorEnd:null,incomplete:!0}),w.style("cursor","crosshair"),console.log("Path started");return}if(t.srcElement.id==="svgContainer"&&!wt(t)){x&&(x.lineTo(t.offsetX,t.offsetY),sn(x.toString(),`path${I}`),console.log("Path segment added"));return}if(wt(t)&&x){x.lineTo(t.offsetX,t.offsetY),sn(x.toString(),`path${I}`),L.includes(t.srcElement.id)?z.select(`#${t.srcElement.id}`).style("fill","black"):cn(t.offsetX,t.offsetY,`marker-end-${I}`),P.addConnection({lineID:`path${I}`,x:t.offsetX,y:t.offsetY,connector:t.srcElement.id,connectorEnd:t.srcElement.id,incomplete:!1}),I++,w.style("cursor","default"),x=null,console.log("Path completed");return}});w.on("mouseover",t=>{L.includes(t.srcElement.id)?X.innerHTML=R[t.srcElement.id]:Ot.includes(t.srcElement.id)&&(X.innerHTML=W[t.srcElement.id]||"DHT11 Sensor Connector")});w.on("mouseout",t=>{(L.includes(t.srcElement.id)||Ot.includes(t.srcElement.id))&&(X.innerHTML="CONNECTOR INFO")});const bo=()=>{const t=document.getElementById("temperature").value;X.innerHTML=`Temperature: ${t}°C`};$.addEventListener("input",()=>{const t=parseInt($.value);if(X.innerHTML=`Temperature: ${t}°C`,Ht){const n=document.getElementById("tempChangeMessage");n.style.display="block",t>70?(n.textContent=`WARNING: High temperature detected - ${t}°C`,n.className="warning"):(n.textContent=`Temperature updated to ${t}°C`,n.className="normal"),console.log(`Message set: ${n.textContent}`),setTimeout(()=>{n.style.opacity="0",setTimeout(()=>{n.style.display="none",n.style.opacity="1"},500)},2e3)}});$.addEventListener("touchmove",t=>{if(!$.disabled){t.preventDefault();const n=parseInt($.value);if(X.innerHTML=`Temperature: ${n}°C`,Ht){const e=document.getElementById("tempChangeMessage");e.style.display="block",n>70?(e.textContent=`WARNING: High temperature detected - ${n}°C`,e.className="warning"):(e.textContent=`Temperature updated to ${n}°C`,e.className="normal"),console.log(`Message set: ${e.textContent}`),setTimeout(()=>{e.style.opacity="0",setTimeout(()=>{e.style.display="none",e.style.opacity="1"},500)},2e3)}}});bo();document.getElementById("codeSubmit").addEventListener("click",()=>{const t=so(P.getConnectionLog());t===!0?(Ht=!0,kt.disabled=!0,kt.style.opacity="0.5",$.disabled=!1,$.style.opacity="1",document.querySelector("#my-drawer-4").click(),console.log("Circuit complete, UNDO button disabled, temperature slider enabled")):t.error?an.throw("Error",t.error):an.throw("Error","Please connect the components properly. Refer to the connection diagram.")});document.getElementById("backButton").addEventListener("click",function(){document.getElementById("my-drawer-4").checked=!1});
